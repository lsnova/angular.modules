!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/cdk/keycodes"),require("@angular/forms"),require("rxjs"),require("rxjs/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define("@lsnova/angularmodules",["exports","@angular/core","@angular/cdk/keycodes","@angular/forms","rxjs","rxjs/operators","@angular/common"],t):t(((e=e||self).lsnova=e.lsnova||{},e.lsnova.angularmodules={}),e.ng.core,e.ng.cdk.keycodes,e.ng.forms,e.rxjs,e.rxjs.operators,e.ng.common)}(this,(function(e,t,n,i,o,r,s){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var a=function(){return(a=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function c(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))}function u(e,t){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}function l(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}var f=".";var h=function(e){void 0===e&&(e={}),this.precision=0,this.decimals=f,this.noScientificNotation=!1,Object.assign(this,e)};var d=function(e){void 0===e&&(e={}),Object.assign(this,e)};var g=function(){function e(e){var t=new d;e&&(t=Object.assign(t,e));var n=t.default||{},i=t.custom||{};this.config=new d({default:new h(n),custom:i})}return e.prototype.getDefaultConfig=function(){return this.config.default},e.prototype.getCustomConfig=function(e){return this.config.custom[e]||console.warn("[lsnNumeric] Invalid config key provided."),a(a({},this.getDefaultConfig()),this.config.custom[e])||this.getDefaultConfig()},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:d}]},e}();var m={provide:i.NG_VALUE_ACCESSOR,useExisting:t.forwardRef((function(){return y})),multi:!0},v={ADDITIONAL_DECIMAL_SEPARATOR:0};v[v.ADDITIONAL_DECIMAL_SEPARATOR]="ADDITIONAL_DECIMAL_SEPARATOR";var y=function(){function e(e,n){this.el=e,this.configService=n,this.lsnNumeric={},this.lsnNumericMessages=new t.EventEmitter,this.onChange=function(e){},this.onTouch=function(){},this.element=e,this.setConfig()}return e.prototype.ngOnChanges=function(){this.setConfig()},e.prototype.inputHandler=function(e){if("-"!==e.target.value){var t=this.removeInvalidCharacters(e.target.value);t=this.handleWholesLength(t);var n=this.parseValue(t);this.displayValue=t.replace(/[,|.]/,this.config.decimals),this.onChange(n)}},e.prototype.focusHandler=function(){this.setEditMode()},e.prototype.blurHandler=function(){var e=this.parseValue(this.element.nativeElement.value),t=this.handleRange(e);if(e!==t)this.displayValue=t.toString().replace(/[,|.]/,this.config.decimals),this.onChange(t);else if(this.config.step&&!isNaN(e)){var n=this.handleStep(e);this.displayValue=n.toString().replace(/[,|.]/,this.config.decimals),this.onChange(n)}this.displayValue=this.prepareDisplayValue(this.element.nativeElement.value),this.onTouch&&this.onTouch()},e.prototype.writeValue=function(e){return c(this,void 0,void 0,(function(){var t;return u(this,(function(n){return t=this.parseValue(e),this.displayValue=this.prepareDisplayValue(t),[2]}))}))},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouch=e},Object.defineProperty(e.prototype,"displayValue",{get:function(){return this.element.nativeElement.value},set:function(e){this.element.nativeElement.value=e},enumerable:!0,configurable:!0}),e.prototype.setConfig=function(){var e=this.lsnNumeric.config?this.configService.getCustomConfig(this.lsnNumeric.config):this.configService.getDefaultConfig();this.config=Object.assign(a(a({},e),this.lsnNumeric)),this.config.decimals&&this.config.thousands&&this.config.decimals===this.config.thousands&&(this.config.thousands=void 0),void 0!==this.config.max&&void 0!==this.config.maxLength&&console.warn("[lsnNumeric] Setting `maxLength` makes `max` redundant.")},e.prototype.parseValue=function(e){if(e||0===e){var t=e.toString().replace(/[,|.]/,"."),n=this.config.precision>0?parseFloat(t):parseInt(t,10);return isNaN(n)?void 0:n}},e.prototype.handleWholesLength=function(e){if(this.config.maxLength){var t=e.toString().startsWith("-")?"-":"",n=e.toString().replace(/^-/,"").replace(/[,|.]/,this.config.decimals);if(n.toString().includes(this.config.decimals)){var i=p(n.toString().split(this.config.decimals),2),o=i[0],r=i[1],s=this.removeInvalidCharacters(r,!0);return t+o.substr(0,this.config.maxLength)+this.config.decimals+s}return t+n.toString().substr(0,this.config.maxLength)}return e},e.prototype.removeInvalidCharacters=function(e,t){return void 0===t&&(t=!1),this.cleanUp(t?e.replace(/[^\-0-9]/g,""):e.replace(/[^\-0-9,.]/g,""))},e.prototype.cleanUp=function(e){var t=e.replace(/[,|.]/g,"."),n="string"==typeof t||t instanceof String?t.indexOf("."):-1;if(-1===n)return t;var i=t.substr(n+1).indexOf(".");return-1!==i&&(this.lsnNumericMessages.emit(v.ADDITIONAL_DECIMAL_SEPARATOR),t=t.substr(0,n+i+1)),0===this.config.precision?t.substr(0,n):this.config.precision?t.substr(0,n+this.config.precision+1):t},e.prototype.handleRange=function(e){return!this.config.maxLength&&void 0!==this.config.max&&e>this.config.max?this.config.max:void 0!==this.config.min&&e<this.config.min?this.config.min:e},e.prototype.handleStep=function(e){return Math.round(e/this.config.step)*this.config.step},e.prototype.prepareDisplayValue=function(e){if(!e&&0!==e)return"";var t=p(this.getWholeAndDecimalParts(e),2),n=t[0],i=t[1],o="-"===n[0]||n<0,r="-"!==n&&n?this.getWholeDisplayValue(n):"0";return this.config.thousands&&(r=r.replace(/\B(?=(\d{3})+(?!\d))/g,this.config.thousands)),this.config.precision&&this.config.decimals&&(this.config.alwaysDisplayDecimals&&this.shouldAddDefaultDecimals(i)?r=r+this.config.decimals+this.defaultDecimals(i,this.config.precision):i&&(r=r+this.config.decimals+i)),o&&"0"!==r?"-"+r:r},e.prototype.setEditMode=function(){if(this.config.thousands){var e=p(this.element.nativeElement.value.split(this.config.decimals),2),t=e[0],n=e[1],i=new RegExp("\\"+this.config.thousands,"g"),o=t.replace(i,"");n&&this.config.precision&&this.config.decimals&&(o=o+this.config.decimals+n),this.displayValue=o}},e.prototype.keyDownHandler=function(e){var t=this.element.nativeElement.value;if(-1===[n.LEFT_ARROW,n.RIGHT_ARROW,n.BACKSPACE,n.DELETE,n.END,n.ENTER,n.ESCAPE,n.HOME,n.TAB].indexOf(e.keyCode)&&(-1===[n.A,n.C,n.R,n.V,n.X].indexOf(e.keyCode)||!0!==e.ctrlKey&&!0!==e.metaKey)){var i=p(t.toString().replace(/^-/,"").toString().split(this.config.decimals),1)[0];if(void 0!==this.config.maxLength&&this.element.nativeElement.selectionStart<i.length&&i.length>=this.config.maxLength&&-1===[n.DASH,n.NUMPAD_MINUS].indexOf(e.keyCode)&&this.element.nativeElement.selectionEnd-this.element.nativeElement.selectionStart==0&&e.preventDefault(),!(-1!==[n.DASH,n.NUMPAD_MINUS].indexOf(e.keyCode)&&0===this.element.nativeElement.selectionStart&&(void 0!==this.config.min&&this.config.min<0||void 0===this.config.min)&&-1===t.indexOf("-")||this.config.precision>0&&-1!==[n.COMMA,n.NUMPAD_PERIOD,190].indexOf(e.keyCode)&&this.element.nativeElement.selectionStart>0&&t.length&&-1===t.indexOf(".")&&-1===t.indexOf(","))){if(this.config.precision>0&&t.indexOf(this.config.decimals)>-1&&this.element.nativeElement.selectionStart>t.indexOf(this.config.decimals)){var o=p(t.split(this.config.decimals),2)[1];o&&o.length>=this.config.precision&&e.preventDefault()}((-1===[n.ZERO,n.ONE,n.TWO,n.THREE,n.FOUR,n.FIVE,n.SIX,n.SEVEN,n.EIGHT,n.NINE].indexOf(e.keyCode)||e.shiftKey)&&-1===[n.NUMPAD_ZERO,n.NUMPAD_ONE,n.NUMPAD_TWO,n.NUMPAD_THREE,n.NUMPAD_FOUR,n.NUMPAD_FIVE,n.NUMPAD_SIX,n.NUMPAD_SEVEN,n.NUMPAD_EIGHT,n.NUMPAD_NINE].indexOf(e.keyCode)||0===this.element.nativeElement.selectionStart&&0===this.element.nativeElement.selectionEnd&&t.indexOf("-")>-1)&&e.preventDefault()}}},e.prototype.setDisabledState=function(e){this.element.nativeElement.disabled=e},e.prototype.getWholeDisplayValue=function(e){var t=Math.abs("number"!=typeof e?parseInt(e,10):e);return this.config.noScientificNotation?t.toLocaleString("fullwide",{useGrouping:!1}):t.toString()},e.prototype.getWholeAndDecimalParts=function(e){if("number"==typeof e){if(this.config.noScientificNotation&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)){var t=e%1;return[Math.floor(e),0!==t?""+t:void 0]}return e.toString().split(".")}return e.toString().split(this.config.decimals)},e.prototype.defaultDecimals=function(e,t){void 0===e&&(e=""),void 0===t&&(t=0);for(var n=""+e;n.length<t;)n+="0";return n},e.prototype.shouldAddDefaultDecimals=function(e){return!e||(""+e).length!==this.config.precision},e.decorators=[{type:t.Directive,args:[{selector:"[lsnNumeric]",providers:[m]}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:g}]},e.propDecorators={lsnNumeric:[{type:t.Input}],lsnNumericMessages:[{type:t.Output}],inputHandler:[{type:t.HostListener,args:["input",["$event"]]}],focusHandler:[{type:t.HostListener,args:["focus",[]]}],blurHandler:[{type:t.HostListener,args:["blur",[]]}],keyDownHandler:[{type:t.HostListener,args:["keydown",["$event"]]}]},e}();var C=function(){function e(){}return e.forRoot=function(t){return{ngModule:e,providers:[g,{provide:d,useValue:t}]}},e.decorators=[{type:t.NgModule,args:[{declarations:[y],exports:[y]}]}],e}(),b=function(){this.allowLeadingZeros=!1};var E=function(){function e(e,t){this.element=e,this.ngControl=t,this.lsnNumPad={},this.defaultConfig=new b}return e.prototype.ngOnChanges=function(){this.config=Object.assign(a(a({},this.defaultConfig),this.lsnNumPad))},e.prototype.inputHandler=function(e){var t=e.target.value;this.setValue(this.parseNewValue(t))},e.prototype.blurHandler=function(e){var t=e.target.value;this.setValue(this.parseNewValue(t,!0))},e.prototype.setValue=function(e){this.ngControl&&this.ngControl.control?this.ngControl.control.setValue(e):this.element.nativeElement.value=e},e.prototype.parseNewValue=function(e,t){void 0===t&&(t=!1);var n=e.replace(/[^0-9]/g,"");return""===n?t?"":n:(this.config.maxlength&&this.config.maxlength>0&&(n=n.substring(0,this.config.maxlength)),!this.config.allowLeadingZeros&&t&&(n=n.replace(/^0+/,"")),n)},e.prototype.keyDownHandler=function(e){var t=this.element.nativeElement.value;-1===[n.LEFT_ARROW,n.RIGHT_ARROW,n.BACKSPACE,n.DELETE,n.END,n.ENTER,n.ESCAPE,n.HOME,n.TAB].indexOf(e.keyCode)&&(-1===[n.A,n.C,n.R,n.V,n.X].indexOf(e.keyCode)||!0!==e.ctrlKey&&!0!==e.metaKey)&&((-1===[n.ZERO,n.ONE,n.TWO,n.THREE,n.FOUR,n.FIVE,n.SIX,n.SEVEN,n.EIGHT,n.NINE].indexOf(e.keyCode)||e.shiftKey)&&-1===[n.NUMPAD_ZERO,n.NUMPAD_ONE,n.NUMPAD_TWO,n.NUMPAD_THREE,n.NUMPAD_FOUR,n.NUMPAD_FIVE,n.NUMPAD_SIX,n.NUMPAD_SEVEN,n.NUMPAD_EIGHT,n.NUMPAD_NINE].indexOf(e.keyCode)||t.length&&this.config.maxlength&&this.config.maxlength>0&&t.length>=this.config.maxlength)&&e.preventDefault()},e.decorators=[{type:t.Directive,args:[{selector:"[lsnNumPad]"}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:i.NgControl,decorators:[{type:t.Optional}]}]},e.propDecorators={lsnNumPad:[{type:t.Input}],inputHandler:[{type:t.HostListener,args:["input",["$event"]]}],blurHandler:[{type:t.HostListener,args:["blur",["$event"]]}],keyDownHandler:[{type:t.HostListener,args:["keydown",["$event"]]}]},e}();var S=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[E],imports:[],exports:[E]}]}],e}(),N=function(){function e(e,t){this.model=e,this.el=t,this.latinToGreek=[[/A/gi,"Α"],[/B/gi,"Β"],[/G/gi,"Γ"],[/D/gi,"Δ"],[/E/gi,"Ε"],[/Z/gi,"Ζ"],[/H/gi,"Η"],[/U/gi,"Θ"],[/I/gi,"Ι"],[/K/gi,"Κ"],[/L/gi,"Λ"],[/M/gi,"Μ"],[/N/gi,"Ν"],[/J/gi,"Ξ"],[/O/gi,"Ο"],[/P/gi,"Π"],[/R/gi,"Ρ"],[/S/gi,"Σ"],[/T/gi,"Τ"],[/Y/gi,"Υ"],[/F/gi,"Φ"],[/X/gi,"Χ"],[/C/gi,"Ψ"],[/V/gi,"Ω"],[/W/gi,"W"],[/Q/gi,"Q"]]}return e.prototype.getCaret=function(){return{start:this.el.nativeElement.selectionStart,end:this.el.nativeElement.selectionEnd}},e.prototype.setCaret=function(e,t){this.el.nativeElement.selectionStart=e,this.el.nativeElement.selectionEnd=t,this.el.nativeElement.focus()},e.prototype.onInputChange=function(e){var t=this.getCaret(),n=t.start,i=t.end,o=e.toLocaleUpperCase();this.latinToGreek.forEach((function(e){o=o.replace(e[0],e[1])})),this.model.valueAccessor.writeValue(o),this.setCaret(n,i)},e.decorators=[{type:t.Directive,args:[{selector:"[ngModel][lsnLatinToGreek]",providers:[i.NgModel]}]}],e.ctorParameters=function(){return[{type:i.NgModel},{type:t.ElementRef}]},e.propDecorators={onInputChange:[{type:t.HostListener,args:["ngModelChange",["$event"]]}]},e}();var D=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[N],imports:[],exports:[N]}]}],e}(),O=function(){function e(e){this.model=e}return e.prototype.onInputChange=function(e){this.model.valueAccessor.writeValue(e.toLocaleUpperCase())},e.decorators=[{type:t.Directive,args:[{selector:"[ngModel][lsnCapitalize]",providers:[i.NgModel]}]}],e.ctorParameters=function(){return[{type:i.NgModel}]},e.propDecorators={onInputChange:[{type:t.HostListener,args:["ngModelChange",["$event"]]}]},e}();var T=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[O],imports:[],exports:[O]}]}],e}(),k=function(){function e(e){this.elementRef=e,this.spySectionChange=new t.EventEmitter,this.disableEmitter=!1,this.subscriptions=[],this.currentSection$=new o.Subject}return e.prototype.ngOnInit=function(){var e=this;this.scrollOffset=this.nativeElement().offsetTop;var t=this.currentSection$.pipe(r.distinctUntilChanged(),r.tap((function(t){return e.spySectionChange.emit(t)}))).subscribe(),n=this.scrollToSection.pipe(r.filter((function(e){return!!e})),r.tap((function(t){return e.scrollTo(t)}))).subscribe();this.subscriptions.push(t,n)},e.prototype.onScroll=function(){var e=this.findCurrentSection();e&&this.setCurrentSection(e.id)},e.prototype.onResize=function(){this.onScroll()},e.prototype.scrollTo=function(e){var t=this;this.disableEmitter=!0,this.nativeElement().querySelector("#"+e).scrollIntoView(),setTimeout((function(){t.disableEmitter=!1}),0)},e.prototype.findCurrentSection=function(){var e=this,t=(this.scrollTopPosition()+this.scrollBottomPosition())/2;return this.getSpiedSections().find((function(n){return e.isCurrentSection(n,t)}))},e.prototype.getSpiedSections=function(){return Array.from(this.nativeElement().querySelectorAll(this.spySelector))},e.prototype.isCurrentSection=function(e,t){return this.sectionTopPosition(e)<=t&&this.sectionBottomPosition(e)>t},e.prototype.setCurrentSection=function(e){this.disableEmitter||this.currentSection$.next(e)},e.prototype.sectionTopPosition=function(e){return e.offsetTop},e.prototype.sectionBottomPosition=function(e){return e.offsetTop+e.offsetHeight},e.prototype.scrollTopPosition=function(){return this.scrollOffset+this.nativeElement().scrollTop},e.prototype.scrollBottomPosition=function(){return this.scrollOffset+this.nativeElement().scrollTop+this.nativeElement().offsetHeight},e.prototype.nativeElement=function(){return this.elementRef.nativeElement},e.prototype.ngOnDestroy=function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))},e.decorators=[{type:t.Directive,args:[{selector:"[lsnScrollSpy]"}]}],e.ctorParameters=function(){return[{type:t.ElementRef}]},e.propDecorators={spySelector:[{type:t.Input}],scrollToSection:[{type:t.Input}],spySectionChange:[{type:t.Output}],onScroll:[{type:t.HostListener,args:["scroll"]}],onResize:[{type:t.HostListener,args:["window:resize"]}]},e}();var x=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[k],imports:[],exports:[k]}]}],e}(),M=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[],imports:[s.CommonModule]}]}],e}();var I=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[s.CommonModule,M],exports:[M]}]}],e}(),A=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[],imports:[i.FormsModule,T,D,C.forRoot({default:{decimals:".",precision:4},custom:{currency:{decimals:",",thousands:" ",precision:2}}}),S,M,I,x],exports:[T,D,C,S,M,I,x]}]}],e}(),R=function(e){var t=void 0===e?{}:e,n=t.cookieCleanFreq,i=void 0===n?null:n,o=t.cookieReadFreq,r=void 0===o?null:o,s=t.msgTtl,a=void 0===s?null:s,c=t.rootDomain,u=void 0===c?null:c,l=t.crossTabCookieName,p=void 0===l?null:l;this.cookieCleanFreq=i,this.cookieReadFreq=r,this.msgTtl=a,this.rootDomain=u,this.crossTabCookieName=p};var P=new t.InjectionToken("LsnCrossTabConfig"),L=function(){function e(e){var t=void 0===e?{}:e,n=t.created,i=void 0===n?null:n,o=t.code,r=void 0===o?null:o,s=t.tabId,a=void 0===s?null:s,c=t.attrs,u=void 0===c?null:c;this.created=i,this.code=r,this.tabId=a,this.attrs=u}return e.compare=function(e,t){return!(!e||!t)&&(e.created===t.created&&(e.code===t.code&&e.tabId!==t.tabId))},e}();var w=function(e){var t=void 0===e?{}:e,n=t.secureCookies,i=void 0===n?null:n,o=t.domainCookies,r=void 0===o?null:o;this.secureCookies=i,this.domainCookies=r};var _=new t.InjectionToken("LsnCookieConfig");var U=function(){function e(e,t){this.cookieConfig=e,this.document=t}return e.prototype.set=function(e,t,n){var i=a(a({},n),{secure:n&&n.secure?n.secure:this.cookieConfig.secureCookies});this.cookieConfig.domainCookies||(i.domain=!1);var o,r=JSON.stringify(t);"number"==typeof i.expires&&(o=i.expires,i.expires=new Date,-1===o?i.expires=new Date("Thu, 01 Jan 1970 00:00:00 GMT"):i.expirationUnit?"hours"===i.expirationUnit?i.expires.setHours(i.expires.getHours()+o):"minutes"===i.expirationUnit?i.expires.setMinutes(i.expires.getMinutes()+o):"seconds"===i.expirationUnit?i.expires.setSeconds(i.expires.getSeconds()+o):"milliseconds"===i.expirationUnit?i.expires.setMilliseconds(i.expires.getMilliseconds()+o):i.expires.setDate(i.expires.getDate()+o):i.expires.setDate(i.expires.getDate()+o)),this.document.cookie=[encodeURIComponent(e),"=",encodeURIComponent(r),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")},e.prototype.get=function(e){var t=(this.document.cookie?this.document.cookie.split("; "):[]).map((function(e){var t=e.indexOf("=");return{name:e.substr(0,t),value:decodeURIComponent(e.substr(t+1))}})).filter((function(t){return void 0!==t.value&&(void 0===e||e===t.name)})).reduce((function(e,t){var n=null;try{n=JSON.parse(t.value)}catch(e){n=t.value}return e[t.name]=n,e}),{});return e?t[e]:Object.keys(t).length>0?t:void 0},e.prototype.remove=function(e,t){return void 0===t&&(t={}),!!this.get(e)&&(t.expires=-1,this.set(e,"",t),!0)},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:w,decorators:[{type:t.Inject,args:[_]}]},{type:void 0,decorators:[{type:t.Inject,args:[s.DOCUMENT]}]}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(_),t.ɵɵinject(s.DOCUMENT))},token:e,providedIn:"root"}),e}();var j=function(){function e(e,t){var n=this;this.lsnCookieService=e,this.messageWasRead=function(e){return n.messagesReadSet.has(n.getMessageId(e))},this.getMessageId=function(e){return e.tabId+e.created+e.code},this.messageToPlainObject=function(e){return Object.keys(e).reduce((function(t,n){var i=e[n];return"attrs"!==n||null!==i&&i!=={}?(t[n]=i,t):t}),{})},this.getCookie=function(){return n.cookie},this.crossTabConfig=t||new R,this.messageSubject=new o.Subject,this.tabId=Math.random()+"",this.messagesReadSet=new Set,this.tabOpenTime=Date.now()}return Object.defineProperty(e.prototype,"crossTabCookieName",{get:function(){return this.crossTabConfig.crossTabCookieName},enumerable:!0,configurable:!0}),e.prototype.run=function(){var e=this;this.cookieReadSubscription||(this.cookieReadSubscription=o.interval(this.crossTabConfig.cookieReadFreq).subscribe((function(){return e.readMessages()}))),this.cookieCleanSubscription||(this.cookieCleanSubscription=o.interval(this.crossTabConfig.cookieCleanFreq).subscribe((function(){return e.cleanCookie()})))},Object.defineProperty(e.prototype,"messages$",{get:function(){return this.messageSubject},enumerable:!0,configurable:!0}),e.prototype.setCrossTabConfig=function(e){this.crossTabConfig=e},e.prototype.sendMessage=function(e){var t;if("string"==typeof e)t=new L({code:e});else if(e instanceof L)t=e;else{if(!e||"object"!=typeof e||Array.isArray(e))return;t=new L(a({},e))}t.created=(new Date).getTime(),t.tabId=this.tabId,this.messagesReadSet.add(this.getMessageId(t)),this.updateCookie(this.messageToPlainObject(t))},e.prototype.updateCookie=function(e){var t=this.cookie;t.push(e),this.cookie=t},Object.defineProperty(e.prototype,"cookie",{get:function(){return this.lsnCookieService.get(this.crossTabConfig.crossTabCookieName)||[]},set:function(e){this.lsnCookieService.set(this.crossTabCookieName,e,{domain:this.crossTabConfig.rootDomain,path:"/"})},enumerable:!0,configurable:!0}),e.prototype.cleanCookie=function(){var e=this.cookie;if(null!==e){var t=(new Date).getTime(),n=e.filter(this.cleanCookieFilter(t,this.crossTabConfig.msgTtl));this.areCookiesEqual(e,this.cookie)&&(this.cookie=n)}},e.prototype.readMessages=function(){var e=this;this.cookie&&this.cookie.forEach((function(t){if(t.created>e.tabOpenTime){var n=a({},t);e.messageWasRead(n)||(e.messagesReadSet.add(e.getMessageId(n)),e.messageSubject.next(n))}}))},e.prototype.unsubscribe=function(){this.cookieReadSubscription.unsubscribe(),this.cookieCleanSubscription.unsubscribe()},e.prototype.ngOnDestroy=function(){this.unsubscribe()},e.prototype.areCookiesEqual=function(e,t){var n,i;if(e.length!==t.length)return!1;if(0===e.length&&0===t.length)return!0;e.sort(this.messageComparer),t.sort(this.messageComparer);var o=0,r=!0;try{for(var s=l(e),a=s.next();!a.done;a=s.next()){var c=a.value;L.compare(c,t[o])?r=!1:++o}}catch(e){n={error:e}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return r},e.prototype.messageComparer=function(e,t){var n=e.created<t.created?-1:t.created<e.created?1:0;return 0===n&&0===(n=e.code<t.code?-1:t.code<e.code?1:0)&&(n=e.tabId<t.tabId?-1:t.tabId<e.tabId?1:0),n},e.prototype.cleanCookieFilter=function(e,t){return function(n){return e-n.created<=t}},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:U},{type:R,decorators:[{type:t.Optional},{type:t.Inject,args:[P]}]}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(U),t.ɵɵinject(P,8))},token:e,providedIn:"root"}),e}();e.CapitalizeDirective=O,e.CustomNumericConfig=d,e.DefaultNumericConfig=h,e.LSN_COOKIE_CONFIG=_,e.LSN_CROSS_TAB_CONFIG=P,e.LatinToGreekDirective=N,e.LsnCapitalizeModule=T,e.LsnCookieConfig=w,e.LsnCookieModule=M,e.LsnCookieService=U,e.LsnCrossTabConfig=R,e.LsnCrossTabMessage=L,e.LsnCrossTabModule=I,e.LsnCrossTabService=j,e.LsnLatinToGreekModule=D,e.LsnLibsModule=A,e.LsnNumericModule=C,e.LsnNumpadModule=S,e.LsnScrollSpyModule=x,e.NumPadDirective=E,e.NumericConfigService=g,e.NumericDirective=y,e.NumericMessage=v,e.ScrollSpyDirective=k,e.lsnCrossTabServiceFactory=function(e){return function(){return e.run()}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=lsnova-angularmodules.umd.min.js.map