!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/cdk/keycodes"),require("@angular/forms"),require("rxjs"),require("rxjs/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define("@lsnova/angularmodules",["exports","@angular/core","@angular/cdk/keycodes","@angular/forms","rxjs","rxjs/operators","@angular/common"],t):t(((e=e||self).lsnova=e.lsnova||{},e.lsnova.angularmodules={}),e.ng.core,e.ng.cdk.keycodes,e.ng.forms,e.rxjs,e.rxjs.operators,e.ng.common)}(this,(function(e,t,n,o,i,r,s){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var a=function(){return(a=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function c(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))}function u(e,t){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}function l(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,i,r=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(e){i={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s}var f=".";var d=function(e){void 0===e&&(e={}),this.precision=0,this.decimals=f,Object.assign(this,e)};var h=function(e){void 0===e&&(e={}),Object.assign(this,e)};var g=function(){function e(e){var t=new h;e&&(t=Object.assign(t,e));var n=t.default||{},o=t.custom||{};this.config=new h({default:new d(n),custom:o})}return e.prototype.getDefaultConfig=function(){return this.config.default},e.prototype.getCustomConfig=function(e){return this.config.custom[e]||console.warn("[lsnNumeric] Invalid config key provided."),a(a({},this.getDefaultConfig()),this.config.custom[e])||this.getDefaultConfig()},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:h}]},e}();var m={provide:o.NG_VALUE_ACCESSOR,useExisting:t.forwardRef((function(){return v})),multi:!0},v=function(){function e(e,t){this.el=e,this.configService=t,this.lsnNumeric={},this.onChange=function(e){},this.onTouch=function(){},this.element=e,this.setConfig()}return e.prototype.ngOnChanges=function(){this.setConfig()},e.prototype.inputHandler=function(e){if("-"!==e.target.value){var t=this.removeInvalidCharacters(e.target.value);t=this.handleWholesLength(t);var n=this.parseValue(t),o=this.handleRange(n);n===o?(this.displayValue=t.replace(/[,|.]/,this.config.decimals),this.onChange(n)):(this.displayValue=o.toString().replace(/[,|.]/,this.config.decimals),this.onChange(o))}},e.prototype.focusHandler=function(){this.setEditMode()},e.prototype.blurHandler=function(){this.displayValue=this.prepareDisplayValue(this.element.nativeElement.value),this.onTouch&&this.onTouch()},e.prototype.writeValue=function(e){return c(this,void 0,void 0,(function(){var t;return u(this,(function(n){return t=this.parseValue(e),t=this.handleRange(t),this.displayValue=this.prepareDisplayValue(t),[2]}))}))},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouch=e},Object.defineProperty(e.prototype,"displayValue",{get:function(){return this.element.nativeElement.value},set:function(e){this.element.nativeElement.value=e},enumerable:!0,configurable:!0}),e.prototype.setConfig=function(){var e=this.lsnNumeric.config?this.configService.getCustomConfig(this.lsnNumeric.config):this.configService.getDefaultConfig();this.config=Object.assign(a(a({},e),this.lsnNumeric)),this.config.decimals&&this.config.thousands&&this.config.decimals===this.config.thousands&&(this.config.thousands=void 0),void 0!==this.config.max&&void 0!==this.config.maxLength&&console.warn("[lsnNumeric] Setting `maxLength` makes `max` redundant.")},e.prototype.parseValue=function(e){if(e||0===e){var t=e.toString().replace(/[,|.]/,"."),n=this.config.precision>0?parseFloat(t):parseInt(t,10);return isNaN(n)?void 0:n}},e.prototype.handleWholesLength=function(e){if(this.config.maxLength){var t=e.toString().startsWith("-")?"-":"",n=e.toString().replace(/^-/,"").replace(/[,|.]/,this.config.decimals);if(n.toString().includes(this.config.decimals)){var o=p(n.toString().split(this.config.decimals),2),i=o[0],r=o[1],s=this.removeInvalidCharacters(r,!0);return t+i.substr(0,this.config.maxLength)+this.config.decimals+s}return t+n.toString().substr(0,this.config.maxLength)}return e},e.prototype.removeInvalidCharacters=function(e,t){return void 0===t&&(t=!1),t?e.replace(/[^0-9]/g,""):e.replace(/[^\-0-9,.]/g,"")},e.prototype.handleRange=function(e){return!this.config.maxLength&&void 0!==this.config.max&&e>this.config.max?this.config.max:void 0!==this.config.min&&e<this.config.min?this.config.min:e},e.prototype.prepareDisplayValue=function(e){if(!e&&0!==e)return"";var t=p("number"==typeof e?e.toString().split("."):e.toString().split(this.config.decimals),2),n=t[0],o=t[1],i="-"===n[0],r="-"!==n&&n?Math.abs(parseInt(n,10)).toString():"0";return this.config.thousands&&(r=r.replace(/\B(?=(\d{3})+(?!\d))/g,this.config.thousands)),o&&this.config.precision&&this.config.decimals&&(r=r+this.config.decimals+o),i&&"0"!==r?"-"+r:r},e.prototype.setEditMode=function(){if(this.config.thousands){var e=p(this.element.nativeElement.value.split(this.config.decimals),2),t=e[0],n=e[1],o=new RegExp("\\"+this.config.thousands,"g"),i=t.replace(o,"");n&&this.config.precision&&this.config.decimals&&(i=i+this.config.decimals+n),this.displayValue=i}},e.prototype.keyDownHandler=function(e){var t=this.element.nativeElement.value;if(-1===[n.LEFT_ARROW,n.RIGHT_ARROW,n.BACKSPACE,n.DELETE,n.END,n.ENTER,n.ESCAPE,n.HOME,n.TAB].indexOf(e.keyCode)&&(-1===[n.A,n.C,n.R,n.V,n.X].indexOf(e.keyCode)||!0!==e.ctrlKey&&!0!==e.metaKey)){var o=p(t.toString().replace(/^-/,"").toString().split(this.config.decimals),1)[0];if(void 0!==this.config.maxLength&&this.element.nativeElement.selectionStart<o.length&&o.length>=this.config.maxLength&&-1===[n.DASH,n.NUMPAD_MINUS].indexOf(e.keyCode)&&this.element.nativeElement.selectionEnd-this.element.nativeElement.selectionStart==0&&e.preventDefault(),!(-1!==[n.DASH,n.NUMPAD_MINUS].indexOf(e.keyCode)&&0===this.element.nativeElement.selectionStart&&(void 0!==this.config.min&&this.config.min<0||void 0===this.config.min)&&-1===t.indexOf("-")||this.config.precision>0&&-1!==[n.COMMA,n.NUMPAD_PERIOD,190].indexOf(e.keyCode)&&this.element.nativeElement.selectionStart>0&&t.length&&-1===t.indexOf(".")&&-1===t.indexOf(","))){if(this.config.precision>0&&t.indexOf(this.config.decimals)>-1&&this.element.nativeElement.selectionStart>t.indexOf(this.config.decimals)){var i=p(t.split(this.config.decimals),2)[1];i&&i.length>=this.config.precision&&e.preventDefault()}((-1===[n.ZERO,n.ONE,n.TWO,n.THREE,n.FOUR,n.FIVE,n.SIX,n.SEVEN,n.EIGHT,n.NINE].indexOf(e.keyCode)||e.shiftKey)&&-1===[n.NUMPAD_ZERO,n.NUMPAD_ONE,n.NUMPAD_TWO,n.NUMPAD_THREE,n.NUMPAD_FOUR,n.NUMPAD_FIVE,n.NUMPAD_SIX,n.NUMPAD_SEVEN,n.NUMPAD_EIGHT,n.NUMPAD_NINE].indexOf(e.keyCode)||0===this.element.nativeElement.selectionStart&&0===this.element.nativeElement.selectionEnd&&t.indexOf("-")>-1)&&e.preventDefault()}}},e.prototype.setDisabledState=function(e){this.element.nativeElement.disabled=e},e.decorators=[{type:t.Directive,args:[{selector:"[lsnNumeric]",providers:[m]}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:g}]},e.propDecorators={lsnNumeric:[{type:t.Input}],inputHandler:[{type:t.HostListener,args:["input",["$event"]]}],focusHandler:[{type:t.HostListener,args:["focus",[]]}],blurHandler:[{type:t.HostListener,args:["blur",[]]}],keyDownHandler:[{type:t.HostListener,args:["keydown",["$event"]]}]},e}();var y=function(){function e(){}return e.forRoot=function(t){return{ngModule:e,providers:[g,{provide:h,useValue:t}]}},e.decorators=[{type:t.NgModule,args:[{declarations:[v],exports:[v]}]}],e}(),C=function(){this.allowLeadingZeros=!1};var b=function(){function e(e,t){this.element=e,this.ngControl=t,this.lsnNumPad={},this.defaultConfig=new C}return e.prototype.ngOnChanges=function(){this.config=Object.assign(a(a({},this.defaultConfig),this.lsnNumPad))},e.prototype.inputHandler=function(e){var t=e.target.value;this.setValue(this.parseNewValue(t))},e.prototype.blurHandler=function(e){var t=e.target.value;this.setValue(this.parseNewValue(t,!0))},e.prototype.setValue=function(e){this.ngControl&&this.ngControl.control?this.ngControl.control.setValue(e):this.element.nativeElement.value=e},e.prototype.parseNewValue=function(e,t){void 0===t&&(t=!1);var n=e.replace(/[^0-9]/g,"");return""===n?t?"":n:(this.config.maxlength&&this.config.maxlength>0&&(n=n.substring(0,this.config.maxlength)),!this.config.allowLeadingZeros&&t&&(n=n.replace(/^0+/,"")),n)},e.prototype.keyDownHandler=function(e){var t=this.element.nativeElement.value;-1===[n.LEFT_ARROW,n.RIGHT_ARROW,n.BACKSPACE,n.DELETE,n.END,n.ENTER,n.ESCAPE,n.HOME,n.TAB].indexOf(e.keyCode)&&(-1===[n.A,n.C,n.R,n.V,n.X].indexOf(e.keyCode)||!0!==e.ctrlKey&&!0!==e.metaKey)&&((-1===[n.ZERO,n.ONE,n.TWO,n.THREE,n.FOUR,n.FIVE,n.SIX,n.SEVEN,n.EIGHT,n.NINE].indexOf(e.keyCode)||e.shiftKey)&&-1===[n.NUMPAD_ZERO,n.NUMPAD_ONE,n.NUMPAD_TWO,n.NUMPAD_THREE,n.NUMPAD_FOUR,n.NUMPAD_FIVE,n.NUMPAD_SIX,n.NUMPAD_SEVEN,n.NUMPAD_EIGHT,n.NUMPAD_NINE].indexOf(e.keyCode)||t.length&&this.config.maxlength&&this.config.maxlength>0&&t.length>=this.config.maxlength)&&e.preventDefault()},e.decorators=[{type:t.Directive,args:[{selector:"[lsnNumPad]"}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:o.NgControl,decorators:[{type:t.Optional}]}]},e.propDecorators={lsnNumPad:[{type:t.Input}],inputHandler:[{type:t.HostListener,args:["input",["$event"]]}],blurHandler:[{type:t.HostListener,args:["blur",["$event"]]}],keyDownHandler:[{type:t.HostListener,args:["keydown",["$event"]]}]},e}();var E=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[b],imports:[],exports:[b]}]}],e}(),S=function(){function e(e,t){this.model=e,this.el=t,this.latinToGreek=[[/A/gi,"Α"],[/B/gi,"Β"],[/G/gi,"Γ"],[/D/gi,"Δ"],[/E/gi,"Ε"],[/Z/gi,"Ζ"],[/H/gi,"Η"],[/U/gi,"Θ"],[/I/gi,"Ι"],[/K/gi,"Κ"],[/L/gi,"Λ"],[/M/gi,"Μ"],[/N/gi,"Ν"],[/J/gi,"Ξ"],[/O/gi,"Ο"],[/P/gi,"Π"],[/R/gi,"Ρ"],[/S/gi,"Σ"],[/T/gi,"Τ"],[/Y/gi,"Υ"],[/F/gi,"Φ"],[/X/gi,"Χ"],[/C/gi,"Ψ"],[/V/gi,"Ω"],[/W/gi,"W"],[/Q/gi,"Q"]]}return e.prototype.getCaret=function(){return{start:this.el.nativeElement.selectionStart,end:this.el.nativeElement.selectionEnd}},e.prototype.setCaret=function(e,t){this.el.nativeElement.selectionStart=e,this.el.nativeElement.selectionEnd=t,this.el.nativeElement.focus()},e.prototype.onInputChange=function(e){var t=this.getCaret(),n=t.start,o=t.end,i=e.toLocaleUpperCase();this.latinToGreek.forEach((function(e){i=i.replace(e[0],e[1])})),this.model.valueAccessor.writeValue(i),this.setCaret(n,o)},e.decorators=[{type:t.Directive,args:[{selector:"[ngModel][lsnLatinToGreek]",providers:[o.NgModel]}]}],e.ctorParameters=function(){return[{type:o.NgModel},{type:t.ElementRef}]},e.propDecorators={onInputChange:[{type:t.HostListener,args:["ngModelChange",["$event"]]}]},e}();var N=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[S],imports:[],exports:[S]}]}],e}(),k=function(){function e(e){this.model=e}return e.prototype.onInputChange=function(e){this.model.valueAccessor.writeValue(e.toLocaleUpperCase())},e.decorators=[{type:t.Directive,args:[{selector:"[ngModel][lsnCapitalize]",providers:[o.NgModel]}]}],e.ctorParameters=function(){return[{type:o.NgModel}]},e.propDecorators={onInputChange:[{type:t.HostListener,args:["ngModelChange",["$event"]]}]},e}();var x=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[k],imports:[],exports:[k]}]}],e}(),T=function(){function e(e){this.elementRef=e,this.spySectionChange=new t.EventEmitter,this.disableEmitter=!1,this.subscriptions=[],this.currentSection$=new i.Subject}return e.prototype.ngOnInit=function(){var e=this;this.scrollOffset=this.nativeElement().offsetTop;var t=this.currentSection$.pipe(r.distinctUntilChanged(),r.tap((function(t){return e.spySectionChange.emit(t)}))).subscribe(),n=this.scrollToSection.pipe(r.filter((function(e){return!!e})),r.tap((function(t){return e.scrollTo(t)}))).subscribe();this.subscriptions.push(t,n)},e.prototype.onScroll=function(){var e=this.findCurrentSection();e&&this.setCurrentSection(e.id)},e.prototype.onResize=function(){this.onScroll()},e.prototype.scrollTo=function(e){var t=this;this.disableEmitter=!0,this.nativeElement().querySelector("#"+e).scrollIntoView(),setTimeout((function(){t.disableEmitter=!1}),0)},e.prototype.findCurrentSection=function(){var e=this,t=(this.scrollTopPosition()+this.scrollBottomPosition())/2;return this.getSpiedSections().find((function(n){return e.isCurrentSection(n,t)}))},e.prototype.getSpiedSections=function(){return Array.from(this.nativeElement().querySelectorAll(this.spySelector))},e.prototype.isCurrentSection=function(e,t){return this.sectionTopPosition(e)<=t&&this.sectionBottomPosition(e)>t},e.prototype.setCurrentSection=function(e){this.disableEmitter||this.currentSection$.next(e)},e.prototype.sectionTopPosition=function(e){return e.offsetTop},e.prototype.sectionBottomPosition=function(e){return e.offsetTop+e.offsetHeight},e.prototype.scrollTopPosition=function(){return this.scrollOffset+this.nativeElement().scrollTop},e.prototype.scrollBottomPosition=function(){return this.scrollOffset+this.nativeElement().scrollTop+this.nativeElement().offsetHeight},e.prototype.nativeElement=function(){return this.elementRef.nativeElement},e.prototype.ngOnDestroy=function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))},e.decorators=[{type:t.Directive,args:[{selector:"[lsnScrollSpy]"}]}],e.ctorParameters=function(){return[{type:t.ElementRef}]},e.propDecorators={spySelector:[{type:t.Input}],scrollToSection:[{type:t.Input}],spySectionChange:[{type:t.Output}],onScroll:[{type:t.HostListener,args:["scroll"]}],onResize:[{type:t.HostListener,args:["window:resize"]}]},e}();var O=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[T],imports:[],exports:[T]}]}],e}(),D=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[],imports:[s.CommonModule]}]}],e}();var M=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[s.CommonModule,D],exports:[D]}]}],e}(),I=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[],imports:[o.FormsModule,x,N,y.forRoot({default:{decimals:".",precision:4},custom:{currency:{decimals:",",thousands:" ",precision:2}}}),E,D,M,O],exports:[x,N,y,E,D,M,O]}]}],e}(),R=function(e){var t=void 0===e?{}:e,n=t.cookieCleanFreq,o=void 0===n?null:n,i=t.cookieReadFreq,r=void 0===i?null:i,s=t.msgTtl,a=void 0===s?null:s,c=t.rootDomain,u=void 0===c?null:c,l=t.crossTabCookieName,p=void 0===l?null:l;this.cookieCleanFreq=o,this.cookieReadFreq=r,this.msgTtl=a,this.rootDomain=u,this.crossTabCookieName=p};var P=new t.InjectionToken("LsnCrossTabConfig"),w=function(){function e(e){var t=void 0===e?{}:e,n=t.created,o=void 0===n?null:n,i=t.code,r=void 0===i?null:i,s=t.tabId,a=void 0===s?null:s,c=t.attrs,u=void 0===c?null:c;this.created=o,this.code=r,this.tabId=a,this.attrs=u}return e.compare=function(e,t){return!(!e||!t)&&(e.created===t.created&&(e.code===t.code&&e.tabId!==t.tabId))},e}();var L=function(e){var t=void 0===e?{}:e,n=t.secureCookies,o=void 0===n?null:n,i=t.domainCookies,r=void 0===i?null:i;this.secureCookies=o,this.domainCookies=r};var A=new t.InjectionToken("LsnCookieConfig");var j=function(){function e(e,t){this.cookieConfig=e,this.document=t}return e.prototype.set=function(e,t,n){var o=a(a({},n),{secure:n&&n.secure?n.secure:this.cookieConfig.secureCookies});this.cookieConfig.domainCookies||(o.domain=!1);var i,r=JSON.stringify(t);"number"==typeof o.expires&&(i=o.expires,o.expires=new Date,-1===i?o.expires=new Date("Thu, 01 Jan 1970 00:00:00 GMT"):o.expirationUnit?"hours"===o.expirationUnit?o.expires.setHours(o.expires.getHours()+i):"minutes"===o.expirationUnit?o.expires.setMinutes(o.expires.getMinutes()+i):"seconds"===o.expirationUnit?o.expires.setSeconds(o.expires.getSeconds()+i):"milliseconds"===o.expirationUnit?o.expires.setMilliseconds(o.expires.getMilliseconds()+i):o.expires.setDate(o.expires.getDate()+i):o.expires.setDate(o.expires.getDate()+i)),this.document.cookie=[encodeURIComponent(e),"=",encodeURIComponent(r),o.expires?"; expires="+o.expires.toUTCString():"",o.path?"; path="+o.path:"",o.domain?"; domain="+o.domain:"",o.secure?"; secure":""].join("")},e.prototype.get=function(e){var t=(this.document.cookie?this.document.cookie.split("; "):[]).map((function(e){var t=e.indexOf("=");return{name:e.substr(0,t),value:decodeURIComponent(e.substr(t+1))}})).filter((function(t){return void 0!==t.value&&(void 0===e||e===t.name)})).reduce((function(e,t){var n=null;try{n=JSON.parse(t.value)}catch(e){n=t.value}return e[t.name]=n,e}),{});return e?t[e]:Object.keys(t).length>0?t:void 0},e.prototype.remove=function(e,t){return void 0===t&&(t={}),!!this.get(e)&&(t.expires=-1,this.set(e,"",t),!0)},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:L,decorators:[{type:t.Inject,args:[A]}]},{type:void 0,decorators:[{type:t.Inject,args:[s.DOCUMENT]}]}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(A),t.ɵɵinject(s.DOCUMENT))},token:e,providedIn:"root"}),e}();var U=function(){function e(e,t){var n=this;this.lsnCookieService=e,this.messageWasRead=function(e){return n.messagesReadSet.has(n.getMessageId(e))},this.getMessageId=function(e){return e.tabId+e.created+e.code},this.messageToPlainObject=function(e){return Object.keys(e).reduce((function(t,n){var o=e[n];return"attrs"!==n||null!==o&&o!=={}?(t[n]=o,t):t}),{})},this.getCookie=function(){return n.cookie},this.crossTabConfig=t||new R,this.messageSubject=new i.Subject,this.tabId=Math.random()+"",this.messagesReadSet=new Set,this.tabOpenTime=Date.now()}return Object.defineProperty(e.prototype,"crossTabCookieName",{get:function(){return this.crossTabConfig.crossTabCookieName},enumerable:!0,configurable:!0}),e.prototype.run=function(){var e=this;this.cookieReadSubscription||(this.cookieReadSubscription=i.interval(this.crossTabConfig.cookieReadFreq).subscribe((function(){return e.readMessages()}))),this.cookieCleanSubscription||(this.cookieCleanSubscription=i.interval(this.crossTabConfig.cookieCleanFreq).subscribe((function(){return e.cleanCookie()})))},Object.defineProperty(e.prototype,"messages$",{get:function(){return this.messageSubject},enumerable:!0,configurable:!0}),e.prototype.setCrossTabConfig=function(e){this.crossTabConfig=e},e.prototype.sendMessage=function(e){var t;if("string"==typeof e)t=new w({code:e});else if(e instanceof w)t=e;else{if(!e||"object"!=typeof e||Array.isArray(e))return;t=new w(a({},e))}t.created=(new Date).getTime(),t.tabId=this.tabId,this.messagesReadSet.add(this.getMessageId(t)),this.updateCookie(this.messageToPlainObject(t))},e.prototype.updateCookie=function(e){var t=this.cookie;t.push(e),this.cookie=t},Object.defineProperty(e.prototype,"cookie",{get:function(){return this.lsnCookieService.get(this.crossTabConfig.crossTabCookieName)||[]},set:function(e){this.lsnCookieService.set(this.crossTabCookieName,e,{domain:this.crossTabConfig.rootDomain,path:"/"})},enumerable:!0,configurable:!0}),e.prototype.cleanCookie=function(){var e=this.cookie;if(null!==e){var t=(new Date).getTime(),n=e.filter(this.cleanCookieFilter(t,this.crossTabConfig.msgTtl));this.areCookiesEqual(e,this.cookie)&&(this.cookie=n)}},e.prototype.readMessages=function(){var e=this;this.cookie&&this.cookie.forEach((function(t){if(t.created>e.tabOpenTime){var n=a({},t);e.messageWasRead(n)||(e.messagesReadSet.add(e.getMessageId(n)),e.messageSubject.next(n))}}))},e.prototype.unsubscribe=function(){this.cookieReadSubscription.unsubscribe(),this.cookieCleanSubscription.unsubscribe()},e.prototype.ngOnDestroy=function(){this.unsubscribe()},e.prototype.areCookiesEqual=function(e,t){var n,o;if(e.length!==t.length)return!1;if(0===e.length&&0===t.length)return!0;e.sort(this.messageComparer),t.sort(this.messageComparer);var i=0,r=!0;try{for(var s=l(e),a=s.next();!a.done;a=s.next()){var c=a.value;w.compare(c,t[i])?r=!1:++i}}catch(e){n={error:e}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return r},e.prototype.messageComparer=function(e,t){var n=e.created<t.created?-1:t.created<e.created?1:0;return 0===n&&0===(n=e.code<t.code?-1:t.code<e.code?1:0)&&(n=e.tabId<t.tabId?-1:t.tabId<e.tabId?1:0),n},e.prototype.cleanCookieFilter=function(e,t){return function(n){return e-n.created<=t}},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:j},{type:R,decorators:[{type:t.Optional},{type:t.Inject,args:[P]}]}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(j),t.ɵɵinject(P,8))},token:e,providedIn:"root"}),e}();e.CapitalizeDirective=k,e.CustomNumericConfig=h,e.DefaultNumericConfig=d,e.LSN_COOKIE_CONFIG=A,e.LSN_CROSS_TAB_CONFIG=P,e.LatinToGreekDirective=S,e.LsnCapitalizeModule=x,e.LsnCookieConfig=L,e.LsnCookieModule=D,e.LsnCookieService=j,e.LsnCrossTabConfig=R,e.LsnCrossTabMessage=w,e.LsnCrossTabModule=M,e.LsnCrossTabService=U,e.LsnLatinToGreekModule=N,e.LsnLibsModule=I,e.LsnNumericModule=y,e.LsnNumpadModule=E,e.LsnScrollSpyModule=O,e.NumPadDirective=b,e.NumericConfigService=g,e.NumericDirective=v,e.ScrollSpyDirective=T,e.lsnCrossTabServiceFactory=function(e){return function(){return e.run()}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=lsnova-angularmodules.umd.min.js.map